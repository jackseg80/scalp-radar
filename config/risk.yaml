initial_capital: 1000.0
max_margin_ratio: 0.70  # Max 70% du capital en marge simultanée

kill_switch:
  max_session_loss_percent: 5.0
  max_daily_loss_percent: 10.0
  grid_max_session_loss_percent: 25.0   # stratégies grid (drawdown structurel normal)
  grid_max_daily_loss_percent: 25.0     # stratégies grid
  global_max_loss_pct: 45       # capital total toutes stratégies, fenêtre glissante
  global_window_hours: 24       # fenêtre glissante en heures

position:
  max_risk_per_trade_percent: 2.0
  max_concurrent_positions: 15
  default_leverage: 3
  max_leverage: 30

fees:
  maker_percent: 0.02
  taker_percent: 0.06
  use_bgb_discount: false

slippage:
  default_estimate_percent: 0.05
  high_volatility_multiplier: 2.0

margin:
  mode: cross  # cross ou isolated
  min_free_margin_percent: 20

sl_tp:
  mode: server_side  # SL/TP toujours sur l'exchange
  sl_type: market     # SL = market order (réaliste)
  sl_real_cost_includes:
    - distance
    - taker_fee
    - slippage

# Adaptive selector (Sprint 5b) — contrôle quelles stratégies tradent en live
adaptive_selector:
  min_trades: 3               # Trades simulation minimum avant autorisation live
  min_profit_factor: 1.0      # PF minimum (gross_wins / gross_losses)
  eval_interval_seconds: 300  # Réévaluation toutes les 5 minutes
  force_strategies: []        # Bypass net_return/PF checks — OVERRIDE via .env FORCE_STRATEGIES

# Sprint 27 : Filtre Darwinien par régime — bloque les nouvelles grilles si WFO Sharpe < 0
regime_filter_enabled: false

# Hotfix 28a : bypass le selector au boot (autorise toutes les stratégies éligibles)
# Auto-désactivé quand toutes les stratégies atteignent min_trades
selector_bypass_at_boot: false

# Hotfix 35 : limite le nombre de cycles grid simultanés (filet de sécurité restart)
max_live_grids: 4