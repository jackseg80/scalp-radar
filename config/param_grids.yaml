# Paramètres d'optimisation walk-forward
optimization:
  is_window_days: 120     # In-sample : 4 mois
  oos_window_days: 30     # Out-of-sample : 1 mois
  step_days: 30           # Pas glissant entre fenêtres
  metric: "sharpe_ratio"  # Métrique d'optimisation (sharpe_ratio | net_return_pct | profit_factor)
  max_workers: 4           # Séquentiel uniquement (pool instable sur laptop i9-14900HX)
  validation_exchange: "bitget"  # Exchange pour la validation croisée

vwap_rsi:
  default:
    rsi_period: [10, 14, 20]
    rsi_long_threshold: [25, 30, 35]
    rsi_short_threshold: [65, 70, 75]
    volume_spike_multiplier: [1.5, 2.0, 2.5]
    vwap_deviation_entry: [0.1, 0.2, 0.3, 0.5]
    trend_adx_threshold: [20, 25, 30]
    tp_percent: [0.4, 0.6, 0.8, 1.0]
    sl_percent: [0.2, 0.3, 0.4, 0.5]
  BTC/USDT:
    sl_percent: [0.2, 0.3, 0.4]
    tp_percent: [0.4, 0.6, 0.8]
  SOL/USDT:
    sl_percent: [0.4, 0.5, 0.7]
    tp_percent: [0.6, 0.8, 1.0, 1.2]

momentum:
  default:
    breakout_lookback: [15, 20, 30, 40]
    volume_confirmation_multiplier: [1.5, 2.0, 2.5]
    atr_multiplier_tp: [1.5, 2.0, 2.5]
    atr_multiplier_sl: [0.5, 1.0, 1.5]
    tp_percent: [0.4, 0.6, 0.8, 1.0]
    sl_percent: [0.2, 0.3, 0.5]

# Funding : ~192 combos (4×4×4×3 = 192)
# extreme_negative_threshold miroir automatique de extreme_positive_threshold
funding:
  default:
    extreme_positive_threshold: [0.01, 0.02, 0.03, 0.05]
    entry_delay_minutes: [0, 3, 5, 10]
    tp_percent: [0.2, 0.3, 0.4, 0.6]
    sl_percent: [0.1, 0.2, 0.3]

# Liquidation : ~576 combos (4×4×4×3×4 = 768, réduit par coarse sampling)
liquidation:
  default:
    oi_change_threshold: [3.0, 5.0, 7.0, 10.0]
    leverage_estimate: [10, 15, 20, 25]
    zone_buffer_percent: [0.5, 1.0, 1.5, 2.0]
    tp_percent: [0.4, 0.6, 0.8]
    sl_percent: [0.2, 0.3, 0.4, 0.5]

# --- Stratégies 1h ---

bollinger_mr:
  wfo:
    is_days: 180
    oos_days: 60
    step_days: 60
  default:
    bb_period: [15, 20, 25, 30]
    bb_std: [1.5, 2.0, 2.5]
    sl_percent: [3.0, 5.0, 7.0, 10.0]

donchian_breakout:
  wfo:
    is_days: 180
    oos_days: 60
    step_days: 60
  default:
    entry_lookback: [20, 30, 40, 55]
    atr_period: [10, 14, 20]
    atr_tp_multiple: [2.0, 3.0, 4.0]
    atr_sl_multiple: [1.0, 1.5, 2.0]

supertrend:
  wfo:
    is_days: 180
    oos_days: 60
    step_days: 60
  default:
    atr_period: [7, 10, 14, 20]
    atr_multiplier: [2.0, 2.5, 3.0, 4.0]
    tp_percent: [3.0, 4.0, 6.0, 8.0]
    sl_percent: [1.5, 2.0, 3.0, 4.0]

# Envelope DCA : 324 combos (3×3×3×3×4), coarse LHS 200
envelope_dca:
  wfo:
    is_days: 180
    oos_days: 60
    step_days: 60
  default:
    ma_period: [5, 7, 8, 10]
    num_levels: [2, 3, 4]
    envelope_start: [0.05, 0.07, 0.10, 0.12, 0.15]
    envelope_step: [0.02, 0.03, 0.05]
    sl_percent: [15.0, 20.0, 25.0, 30.0]

# Envelope DCA SHORT : même grille que LONG, à ajuster après WFO
envelope_dca_short:
  wfo:
    is_days: 180
    oos_days: 60
    step_days: 60
  default:
    ma_period: [5, 7, 10]
    num_levels: [2, 3, 4]
    envelope_start: [0.05, 0.07, 0.10]
    envelope_step: [0.02, 0.03, 0.05]
    sl_percent: [15.0, 20.0, 25.0, 30.0]

# Grid ATR : 3240 combos (4×3×5×3×3×4), ~5 min/asset
grid_atr:
  wfo:
    is_days: 180
    oos_days: 60
    step_days: 60
  default:
    ma_period: [7, 10, 14, 20]
    atr_period: [10, 14, 20]
    atr_multiplier_start: [1.0, 1.5, 2.0, 2.5, 3.0]
    atr_multiplier_step: [0.5, 1.0, 1.5]
    num_levels: [2, 3, 4]
    sl_percent: [15.0, 20.0, 25.0, 30.0]

# Grid Multi-TF : 384 combos (2×2×2×2×2×2×2×3), ~2 min/asset
grid_multi_tf:
  wfo:
    is_days: 180
    oos_days: 60
    step_days: 60
  default:
    st_atr_period: [10, 14]
    st_atr_multiplier: [2.0, 3.0]
    ma_period: [7, 10]
    atr_period: [10, 14]
    atr_multiplier_start: [1.5, 2.0]
    atr_multiplier_step: [0.5, 1.0]
    num_levels: [2, 3]
    sl_percent: [15.0, 20.0, 25.0]

# Grid Funding : 2592 combos (4×3×2×3×4×3×3), ~8 min/asset
grid_funding:
  wfo:
    is_days: 360
    oos_days: 90
    step_days: 90
  default:
    funding_threshold_start: [0.0003, 0.0005, 0.0008, 0.001]
    funding_threshold_step: [0.0003, 0.0005, 0.001]
    num_levels: [2, 3]
    ma_period: [7, 14, 21]
    sl_percent: [10.0, 15.0, 20.0, 25.0]
    tp_mode: ["funding_positive", "sma_cross", "funding_or_sma"]
    min_hold_candles: [4, 8, 16]

# Grid Trend : 2592 combos (3×2×1×3×1×3×2×2×4×3), ~8 min/asset
grid_trend:
  wfo:
    is_days: 360
    oos_days: 90
    step_days: 90
  default:
    ema_fast: [20, 30, 40]
    ema_slow: [50, 100]
    adx_period: [14]
    adx_threshold: [15, 20, 25]
    atr_period: [14]
    pull_start: [0.5, 1.0, 1.5]
    pull_step: [0.5, 1.0]
    num_levels: [2, 3]
    trail_mult: [1.5, 2.0, 2.5, 3.0]
    sl_percent: [10, 15, 20]
